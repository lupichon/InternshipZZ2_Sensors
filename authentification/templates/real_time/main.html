{% load static %}

<!DOCTYPE html>
<html lang="en">

	<head>
		<title>Measures</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=2.0" />
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="image/png" href="{% static 'IMAGES/icons/favicon.ico' %}"/>
		<link rel="stylesheet" type="text/css" href="{% static 'FONT/font-awesome-4.7.0/css/font-awesome.min.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'FONT/iconic/css/material-design-iconic-font.min.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'CSS/util.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'CSS/main.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'CSS/styles.css' %}">
		<object id="model3D" type="model/obj" data="{% static 'PROCESSING/3D_model_rifle/11737_rifle_v1_L2.obj' %}" width="600" height="400"></object>
		<img id = "target" src="{% static 'PROCESSING/3D_model_rifle/target.png' %}" style="display: none;">
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.3/p5.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.3/addons/p5.sound.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/toxiclibsjs/0.1.3/toxiclibs.min.js" integrity="sha512-XXs22VoCpwSw/DSIaY5YXMBLEp2CFA7vQO+GzNxFk8kmhabcHgXYpU7gFDij7+VLmoDfW3F3y5bu0O9r7REP2A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	</head>
	
    <body>	
		<div class="limiter">
			<div id = "container" class="container-login100" style="background-image: url('{% static "IMAGES/bg-01.jpg" %}');">

				<div class="wrap-login100" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100px; border-radius: 0;">

					<span class="login100-form-title p-b-0 p-t-0"  style="position: absolute; top: 30%; left: 40%; font-size: 40px">
						Real-Time Measurement
					</span>

					<span id="SessionID" class="login100-form-title p-b-0 p-t-0"  style="position: absolute; top: 20%; left: 5%; font-size: 15px;">
						Session ID : 
					</span>

					<span id="ShotID" class="login100-form-title p-b-0 p-t-0"  style="position: absolute; top: 65%; left: 5%; font-size: 15px">
						Shot number
					</span>
				</div>
				<canvas id="chart1" style="position: absolute; left: 75%; width: 25%; height: 23%;"></canvas>


			</div>
		</div>

		<script>
			window.addEventListener('beforeunload', function (event) 
			{
				navigator.sendBeacon('/stop_measure/');
			});

			document.addEventListener('DOMContentLoaded', function() {
				fetch('/start_measure/', {
					method: 'GET'
				})
				.then(response => {
					if (response.ok) {
						console.log('Vue de démarrage appelée avec succès.');
					} else {
						console.error('Échec de l\'appel de la vue de démarrage.');
					}
				})
				.catch(error => {
					console.error('Erreur lors de l\'appel de la vue de démarrage:', error);
				});
			});
		</script>

		<script src="{% static 'JS/sendParameters.js' %}"></script> 
		<script src="{% static 'JS/wiiboard.js' %}" ></script>
		<script src="{% static 'JS/rifle.js' %}" ></script>  
		<script src="{% static 'JS/orientation.js' %}" ></script>
		<script src="{% static 'JS/stability.js' %}" ></script>
	</body>
</html>